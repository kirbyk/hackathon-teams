<h1>Teams</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Team</th>
      <th><%= link_to 'Team Rating', :sort => 'rating_avg' %></th>
      <th>Status</th>
      <th>Rating</th>
      <th>Fname</th>
      <th>Lname</th>
      <th>School</th>
      <th>Email</th>
      <th>Github</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @teams.each do |team| %>
      <% team.hackers.each do |hacker| %>
        <tr>
          <% if hacker == team.hackers.first %>
            <td rowspan="<%= team.hackers.count %>" class="middle"><%= link_to "Team #{team.id}", team %></td>
            <td rowspan="<%= team.hackers.count %>" class="middle"><%= '%.2f' % team.rating_avg if team.rating_avg %></td>
          <% end %>
          <td><%= hacker.status.name %></td>
          <td><%= hacker.rating %></td>
          <td><%= hacker.fname %></td>
          <td><%= hacker.lname %></td>
          <td><%= hacker.school.name if hacker.school %></td>
          <td><%= hacker.email %></td>
          <td><%= link_to hacker.github, "http://github.com/#{hacker.github}"%></td>
          <td><%= link_to 'Show', hacker %></td>
          <td><%= link_to 'Edit', edit_hacker_path(hacker) %></td>
          <td><%= link_to 'Destroy', hacker, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Team', new_team_path %>
